# ä¸œæ–¹è´¢å¯Œ API æ¥å£æ–‡æ¡£

> åŸºäº akshare é¡¹ç›®æ•´ç†çš„ä¸œæ–¹è´¢å¯Œç½‘æ•°æ®æ¥å£ï¼Œé€‚ç”¨äº A è‚¡æ—¥å†…äº¤æ˜“åˆ†æ

## ğŸ“‹ ç›®å½•

- [å®æ—¶è¡Œæƒ…](#å®æ—¶è¡Œæƒ…)
- [Kçº¿æ•°æ®](#kçº¿æ•°æ®)
- [åˆ†æ—¶æ•°æ®](#åˆ†æ—¶æ•°æ®)
- [ç›˜å£æ•°æ®](#ç›˜å£æ•°æ®)
- [èµ„é‡‘æµå‘](#èµ„é‡‘æµå‘)
- [æ²ªæ·±æ¸¯é€š](#æ²ªæ·±æ¸¯é€š)
- [çƒ­é—¨æ’è¡Œ](#çƒ­é—¨æ’è¡Œ)
- [æ¿å—æ•°æ®](#æ¿å—æ•°æ®)

---

## å®æ—¶è¡Œæƒ…

### 1. å•è‚¡ç¥¨å®æ—¶è¡Œæƒ…
**æ¥å£**: `https://push2.eastmoney.com/api/qt/stock/get`

**å‚æ•°**:
```javascript
{
  ut: 'fa5fd1943c7b386f172d6893dbfba10b',
  invt: '2',
  fltt: '2',
  fields: 'f43,f44,f45,f46,f47,f48,f50,f57,f58,f60,f168,f169,f170,f171',
  secid: `${marketCode}.${symbol}`  // 1.600519 æˆ– 0.000001
}
```

**è¿”å›å­—æ®µ**:
- `f43`: æœ€æ–°ä»·
- `f44`: æœ€é«˜ä»·
- `f45`: æœ€ä½ä»·
- `f46`: ä»Šå¼€
- `f60`: æ˜¨æ”¶
- `f168`: æ¢æ‰‹ç‡
- `f169`: æ¶¨è·Œé¢
- `f170`: æ¶¨è·Œå¹…
- `f171`: æŒ¯å¹…
- `f50`: é‡æ¯”

**ç”¨é€”**: è·å–å•åªè‚¡ç¥¨çš„å®æ—¶è¡Œæƒ…æ•°æ®

---

### 2. æ‰¹é‡è‚¡ç¥¨å®æ—¶è¡Œæƒ…
**æ¥å£**: `https://push2.eastmoney.com/api/qt/ulist.np/get`

**å‚æ•°**:
```javascript
{
  fltt: '2',
  invt: '2',
  fields: 'f12,f14,f2,f3,f5,f6,f8,f9,f10,f15,f16,f17,f18,f13',
  secids: '1.600519,0.000001,0.159855'  // å¤šä¸ªè‚¡ç¥¨ç”¨é€—å·åˆ†éš”
}
```

**è¿”å›å­—æ®µ**:
- `f2`: æœ€æ–°ä»·
- `f3`: æ¶¨è·Œå¹…
- `f5`: æˆäº¤é‡(æ‰‹)
- `f6`: æˆäº¤é¢
- `f8`: æ¢æ‰‹ç‡
- `f9`: å¸‚ç›ˆç‡
- `f10`: å¸‚å‡€ç‡
- `f12`: ä»£ç 
- `f13`: å¸‚åœº(0=æ·±åœ³, 1=ä¸Šæµ·)
- `f14`: åç§°
- `f15`: æœ€é«˜
- `f16`: æœ€ä½
- `f17`: ä»Šå¼€
- `f18`: æ˜¨æ”¶

**ç”¨é€”**: ä¸€æ¬¡è¯·æ±‚è·å–å¤šåªè‚¡ç¥¨çš„å®æ—¶è¡Œæƒ…

---

## Kçº¿æ•°æ®

### 3. å†å²Kçº¿æ•°æ®
**æ¥å£**: `https://push2his.eastmoney.com/api/qt/stock/kline/get`

**å‚æ•°**:
```javascript
{
  fields1: 'f1,f2,f3,f4,f5,f6',
  fields2: 'f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61',
  ut: '7eea3edcaed734bea9cbfc24409ed989',
  klt: '101',  // å‘¨æœŸ: 5/15/30/60(åˆ†é’Ÿ), 101(æ—¥), 102(å‘¨), 103(æœˆ)
  fqt: '1',    // å¤æƒ: 0(ä¸å¤æƒ), 1(å‰å¤æƒ), 2(åå¤æƒ)
  secid: `${marketCode}.${symbol}`,
  beg: '0',
  end: '20500101',
  lmt: '120'   // æ•°æ®æ¡æ•°
}
```

**è¿”å›æ•°æ®æ ¼å¼** (é€—å·åˆ†éš”):
```
æ—¥æœŸ,å¼€ç›˜,æ”¶ç›˜,æœ€é«˜,æœ€ä½,æˆäº¤é‡,æˆäº¤é¢,æŒ¯å¹…,æ¶¨è·Œå¹…,æ¶¨è·Œé¢,æ¢æ‰‹ç‡
```

**å‘¨æœŸè¯´æ˜**:
- `5`: 5åˆ†é’ŸKçº¿
- `15`: 15åˆ†é’ŸKçº¿
- `30`: 30åˆ†é’ŸKçº¿
- `60`: 60åˆ†é’ŸKçº¿
- `101`: æ—¥Kçº¿
- `102`: å‘¨Kçº¿
- `103`: æœˆKçº¿

**ç”¨é€”**: è·å–å¤šå‘¨æœŸKçº¿æ•°æ®ï¼Œç”¨äºæŠ€æœ¯åˆ†æ

---

## åˆ†æ—¶æ•°æ®

### 4. å½“æ—¥åˆ†æ—¶èµ°åŠ¿
**æ¥å£**: `https://push2.eastmoney.com/api/qt/stock/trends2/get`

**å‚æ•°**:
```javascript
{
  fields1: 'f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f11,f12,f13',
  fields2: 'f51,f52,f53,f54,f55,f56,f57,f58',
  ut: '7eea3edcaed734bea9cbfc24409ed989',
  ndays: '1',  // å¤©æ•°: 1(å½“æ—¥), 5(æœ€è¿‘5å¤©)
  iscr: '0',
  secid: `${marketCode}.${symbol}`
}
```

**è¿”å›æ•°æ®æ ¼å¼** (é€—å·åˆ†éš”):
```
æ—¶é—´,å¼€ç›˜,æ”¶ç›˜,æœ€é«˜,æœ€ä½,æˆäº¤é‡,æˆäº¤é¢,å‡ä»·
```

**ç”¨é€”**: è·å–å½“æ—¥åˆ†æ—¶èµ°åŠ¿ï¼Œè§‚å¯Ÿæ—¥å†…ä»·æ ¼æ³¢åŠ¨

---

### 5. åˆ†æ—¶æˆäº¤æ˜ç»†
**æ¥å£**: `https://70.push2.eastmoney.com/api/qt/stock/details/sse`

**å‚æ•°**:
```javascript
{
  fields1: 'f1,f2,f3,f4',
  fields2: 'f51,f52,f53,f54,f55',
  mpi: '2000',
  ut: 'bd1d9ddb04089700cf9c27f6f7426281',
  fltt: '2',
  pos: '-0',
  secid: `${marketCode}.${symbol}`,
  wbp2u: '|0|0|0|web'
}
```

**è¿”å›å­—æ®µ**:
- æ—¶é—´
- æˆäº¤ä»·
- æ‰‹æ•°
- ä¹°å–ç›˜æ€§è´¨ (1=å–ç›˜, 2=ä¹°ç›˜, 4=ä¸­æ€§ç›˜)

**ç”¨é€”**: è·å–é€ç¬”æˆäº¤æ•°æ®ï¼Œåˆ†æä¸»åŠ¨ä¹°å–ç›˜

---

## ç›˜å£æ•°æ®

### 6. ä¹°å–äº”æ¡£ç›˜å£
**æ¥å£**: `https://push2.eastmoney.com/api/qt/stock/get`

**å‚æ•°**:
```javascript
{
  fltt: '2',
  invt: '2',
  fields: 'f11,f12,f13,f14,f15,f16,f17,f18,f19,f20,f31,f32,f33,f34,f35,f36,f37,f38,f39,f40,f43,f44,f45,f46,f47,f48,f49,f50,f51,f52,f60,f71,f161,f168,f169,f170',
  secid: `${marketCode}.${symbol}`
}
```

**è¿”å›å­—æ®µ**:
- `f11-f12`: ä¹°äº”ä»·æ ¼å’Œæ•°é‡
- `f13-f14`: ä¹°å››ä»·æ ¼å’Œæ•°é‡
- `f15-f16`: ä¹°ä¸‰ä»·æ ¼å’Œæ•°é‡
- `f17-f18`: ä¹°äºŒä»·æ ¼å’Œæ•°é‡
- `f19-f20`: ä¹°ä¸€ä»·æ ¼å’Œæ•°é‡
- `f31-f32`: å–äº”ä»·æ ¼å’Œæ•°é‡
- `f33-f34`: å–å››ä»·æ ¼å’Œæ•°é‡
- `f35-f36`: å–ä¸‰ä»·æ ¼å’Œæ•°é‡
- `f37-f38`: å–äºŒä»·æ ¼å’Œæ•°é‡
- `f39-f40`: å–ä¸€ä»·æ ¼å’Œæ•°é‡
- `f43`: æœ€æ–°ä»·
- `f44`: æœ€é«˜
- `f45`: æœ€ä½
- `f46`: ä»Šå¼€
- `f47`: æ€»æ‰‹
- `f48`: é‡‘é¢
- `f49`: å¤–ç›˜
- `f50`: é‡æ¯”
- `f51`: æ¶¨åœä»·
- `f52`: è·Œåœä»·
- `f60`: æ˜¨æ”¶
- `f71`: å‡ä»·
- `f161`: å†…ç›˜
- `f168`: æ¢æ‰‹ç‡
- `f169`: æ¶¨è·Œé¢
- `f170`: æ¶¨è·Œå¹…

**ç”¨é€”**: è·å–ä¹°å–äº”æ¡£æ•°æ®ï¼Œåˆ†æç›˜å£å‹åŠ›å’Œæ”¯æ’‘

---

## èµ„é‡‘æµå‘

### 7. ä¸ªè‚¡èµ„é‡‘æµå‘
**æ¥å£**: `https://push2his.eastmoney.com/api/qt/stock/fflow/daykline/get`

**å‚æ•°**:
```javascript
{
  lmt: '0',
  klt: '101',  // 101=æ—¥çº¿
  secid: `${marketCode}.${symbol}`,
  fields1: 'f1,f2,f3,f7',
  fields2: 'f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61,f62,f63,f64,f65',
  ut: 'b2884a393a59ad64002292a3e90d46a5',
  _: Date.now()
}
```

**è¿”å›å­—æ®µ** (é€—å·åˆ†éš”):
```
æ—¥æœŸ,ä¸»åŠ›å‡€æµå…¥-å‡€é¢,å°å•å‡€æµå…¥-å‡€é¢,ä¸­å•å‡€æµå…¥-å‡€é¢,å¤§å•å‡€æµå…¥-å‡€é¢,è¶…å¤§å•å‡€æµå…¥-å‡€é¢,
ä¸»åŠ›å‡€æµå…¥-å‡€å æ¯”,å°å•å‡€æµå…¥-å‡€å æ¯”,ä¸­å•å‡€æµå…¥-å‡€å æ¯”,å¤§å•å‡€æµå…¥-å‡€å æ¯”,è¶…å¤§å•å‡€æµå…¥-å‡€å æ¯”,
æ”¶ç›˜ä»·,æ¶¨è·Œå¹…
```

**èµ„é‡‘åˆ†ç±»**:
- **è¶…å¤§å•**: å•ç¬”æˆäº¤ >= 100ä¸‡å…ƒ
- **å¤§å•**: å•ç¬”æˆäº¤ 20-100ä¸‡å…ƒ
- **ä¸­å•**: å•ç¬”æˆäº¤ 5-20ä¸‡å…ƒ
- **å°å•**: å•ç¬”æˆäº¤ < 5ä¸‡å…ƒ
- **ä¸»åŠ›**: è¶…å¤§å• + å¤§å•

**ç”¨é€”**: åˆ†æä¸»åŠ›èµ„é‡‘æµå‘ï¼Œåˆ¤æ–­æœºæ„è¡Œä¸º

---

## æ²ªæ·±æ¸¯é€š

### 8. åŒ—å‘èµ„é‡‘æµå‘
**æ¥å£**: `https://push2.eastmoney.com/api/qt/clist/get`

**å‚æ•°**:
```javascript
{
  np: '1',
  fltt: '1',
  invt: '2',
  fs: 'b:DLMK0101',  // AHè‚¡æ¯”ä»·
  fields: 'f193,f191,f192,f12,f13,f14,f1,f2,f4,f3,f152,f186,f190,f187,f189,f188',
  fid: 'f3',
  pn: '1',
  pz: '100',
  po: '1',
  dect: '1',
  wbp2u: '|0|0|0|web'
}
```

**ç”¨é€”**: è·å–åŒ—å‘èµ„é‡‘ï¼ˆæ²ªæ·±æ¸¯é€šï¼‰æµå‘æ•°æ®

---

## çƒ­é—¨æ’è¡Œ

### 9. ä¸ªè‚¡äººæ°”æ¦œ
**æ¥å£**: `https://emappdata.eastmoney.com/stockrank/getAllCurrentList`

**è¯·æ±‚æ–¹å¼**: POST

**å‚æ•°**:
```javascript
{
  appId: 'appId01',
  globalId: '786e4c21-70dc-435a-93bb-38',
  marketType: '',
  pageNo: 1,
  pageSize: 100
}
```

**ç”¨é€”**: è·å–ä¸œæ–¹è´¢å¯Œè‚¡å§äººæ°”æ’è¡Œæ¦œ

---

## æ¿å—æ•°æ®

### 10. æ¦‚å¿µæ¿å—è¡Œæƒ…
**æ¥å£**: `https://79.push2.eastmoney.com/api/qt/clist/get`

**å‚æ•°**:
```javascript
{
  pn: '1',
  pz: '100',
  po: '1',
  np: '1',
  ut: 'bd1d9ddb04089700cf9c27f6f7426281',
  fltt: '2',
  invt: '2',
  fid: 'f12',
  fs: 'm:90 t:3 f:!50',  // æ¦‚å¿µæ¿å—
  fields: 'f2,f3,f4,f8,f12,f14,f15,f16,f17,f18,f20,f21,f24,f25,f22,f33,f11,f62,f128,f124,f107,f104,f105,f136'
}
```

**æ¿å—ç±»å‹**:
- `m:90 t:2`: è¡Œä¸šæ¿å—
- `m:90 t:3`: æ¦‚å¿µæ¿å—
- `m:90 t:1`: åœ°åŸŸæ¿å—

**ç”¨é€”**: è·å–æ¿å—è¡Œæƒ…ï¼Œåˆ†æçƒ­ç‚¹æ¿å—

---

## ğŸ¯ æ¨èç”¨äºæ—¥å†…åšTçš„æ¥å£ç»„åˆ

### åŸºç¡€æ•°æ®ï¼ˆå¿…éœ€ï¼‰
1. **å®æ—¶è¡Œæƒ…** - å•è‚¡ç¥¨å®æ—¶è¡Œæƒ… (æ¥å£1)
2. **Kçº¿æ•°æ®** - æ—¥Kã€60åˆ†é’ŸKã€15åˆ†é’ŸK (æ¥å£3)
3. **åˆ†æ—¶æ•°æ®** - å½“æ—¥åˆ†æ—¶èµ°åŠ¿ (æ¥å£4)

### è¿›é˜¶æ•°æ®ï¼ˆæ¨èï¼‰
4. **ç›˜å£æ•°æ®** - ä¹°å–äº”æ¡£ (æ¥å£6)
5. **èµ„é‡‘æµå‘** - ä¸ªè‚¡èµ„é‡‘æµå‘ (æ¥å£7)
6. **æˆäº¤æ˜ç»†** - åˆ†æ—¶æˆäº¤æ˜ç»† (æ¥å£5)

### è¾…åŠ©æ•°æ®ï¼ˆå¯é€‰ï¼‰
7. **æ¿å—æ•°æ®** - æ¦‚å¿µæ¿å—è¡Œæƒ… (æ¥å£10)
8. **çƒ­é—¨æ’è¡Œ** - ä¸ªè‚¡äººæ°”æ¦œ (æ¥å£9)

---

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### JavaScript/TypeScript ç¤ºä¾‹

```javascript
// 1. è·å–å®æ—¶è¡Œæƒ…
async function fetchRealtimeQuote(symbol) {
  const marketCode = symbol.startsWith('6') ? 1 : 0
  const url = 'https://push2.eastmoney.com/api/qt/stock/get'
  const params = new URLSearchParams({
    ut: 'fa5fd1943c7b386f172d6893dbfba10b',
    invt: '2',
    fltt: '2',
    fields: 'f43,f44,f45,f46,f60,f168,f169,f170,f171,f50',
    secid: `${marketCode}.${symbol}`
  })
  
  const response = await fetch(`${url}?${params}`)
  const data = await response.json()
  return data.data
}

// 2. è·å–Kçº¿æ•°æ®
async function fetchKlineData(symbol, period = '60', limit = 120) {
  const marketCode = symbol.startsWith('6') ? 1 : 0
  const url = 'https://push2his.eastmoney.com/api/qt/stock/kline/get'
  const params = new URLSearchParams({
    fields1: 'f1,f2,f3,f4,f5,f6',
    fields2: 'f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61',
    ut: '7eea3edcaed734bea9cbfc24409ed989',
    klt: period,
    fqt: '1',
    secid: `${marketCode}.${symbol}`,
    beg: '0',
    end: '20500101',
    lmt: limit.toString()
  })
  
  const response = await fetch(`${url}?${params}`)
  const data = await response.json()
  return data.data.klines.map(line => {
    const [date, open, close, high, low, volume, amount] = line.split(',')
    return { date, open: parseFloat(open), close: parseFloat(close), 
             high: parseFloat(high), low: parseFloat(low), 
             volume: parseFloat(volume), amount: parseFloat(amount) }
  })
}

// 3. è·å–èµ„é‡‘æµå‘
async function fetchFundFlow(symbol, market = 'sh') {
  const marketMap = { sh: 1, sz: 0 }
  const url = 'https://push2his.eastmoney.com/api/qt/stock/fflow/daykline/get'
  const params = new URLSearchParams({
    lmt: '0',
    klt: '101',
    secid: `${marketMap[market]}.${symbol}`,
    fields1: 'f1,f2,f3,f7',
    fields2: 'f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61,f62,f63,f64,f65',
    ut: 'b2884a393a59ad64002292a3e90d46a5',
    _: Date.now()
  })
  
  const response = await fetch(`${url}?${params}`)
  const data = await response.json()
  return data.data.klines
}
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è¯·æ±‚é¢‘ç‡**: å»ºè®®æ§åˆ¶è¯·æ±‚é¢‘ç‡ï¼Œé¿å…è¢«é™æµ
2. **å¸‚åœºä»£ç **: 
   - ä¸Šæµ·: `1` æˆ– `sh`
   - æ·±åœ³: `0` æˆ– `sz`
   - åŒ—äº¬: `0` æˆ– `bj`
3. **è‚¡ç¥¨ä»£ç **: 
   - 6å¼€å¤´ä¸ºä¸Šæµ·è‚¡ç¥¨
   - 0/3å¼€å¤´ä¸ºæ·±åœ³è‚¡ç¥¨
4. **æ•°æ®å»¶è¿Ÿ**: å®æ—¶æ•°æ®å¯èƒ½æœ‰å‡ ç§’å»¶è¿Ÿ
5. **å¤æƒå¤„ç†**: Kçº¿æ•°æ®å»ºè®®ä½¿ç”¨å‰å¤æƒ(`fqt=1`)

---

## ğŸ“š å‚è€ƒèµ„æº

- [akshare å®˜æ–¹æ–‡æ¡£](https://akshare.akfamily.xyz/)
- [ä¸œæ–¹è´¢å¯Œç½‘](https://www.eastmoney.com/)
- [ä¸œæ–¹è´¢å¯Œè¡Œæƒ…ä¸­å¿ƒ](https://quote.eastmoney.com/)

---

**æœ€åæ›´æ–°**: 2024-12-14
**ç»´æŠ¤è€…**: FinBoard Project
