name = "market-board-api"
main = "index.js"
compatibility_date = "2024-01-01"

# KV 绑定 - 用于用户配置存储（JSON 结构，读多写少）
[[kv_namespaces]]
binding = "CONFIG_KV"
id = "581a1195af51480b9b65fd50826fb33b"

# D1 数据库绑定 - 用于用户管理和 AI 使用统计
[[d1_databases]]
binding = "DB"
database_name = "fintell-db"
database_id = "047dd4bc-6711-4e54-9719-dccff29c2d66"

# 定时任务
# - 北京时间 6:00 (UTC 22:00): 生成日报 + 邮件推送 + 微信草稿
# - 北京时间 7:30 (UTC 23:30): 检查微信是否已发布，未发布则自动发布
[triggers]
crons = ["0 22 * * *", "30 23 * * *"]

# 环境变量 - 非敏感配置
[vars]
BREVO_SENDER_EMAIL = "admin@newestgpt.com"
BREVO_SENDER_NAME = "Fintell"
SITE_URL = "https://board.newestgpt.com"

# 敏感信息请使用 Cloudflare Secrets 配置：
# npx wrangler secret put BREVO_API_KEY
# npx wrangler secret put SCREENSHOT_API_KEY

# 微信公众号配置（认证服务号）：
# npx wrangler secret put WECHAT_MP_APPID
# npx wrangler secret put WECHAT_MP_SECRET
