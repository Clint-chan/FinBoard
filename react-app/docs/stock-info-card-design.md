# 股票信息卡片设计文档

## 概述

在 Insight 大屏的 SuperChart 组件中，当用户鼠标悬停在股票名称上时，会显示一个详细的股票信息卡片，提供全面的基本面和市场数据。

## 设计参考

参考了专业看盘软件（同花顺、东方财富、通达信）的指标体系，选择了投资者最关注的核心指标。

## 指标分类

### 1. 市值与股本
- **总市值**：公司总股本 × 当前股价
- **流通市值**：流通股本 × 当前股价
- **总股本**：公司发行的全部股票数量
- **流通股**：可以在二级市场自由交易的股票数量

### 2. 估值指标
- **市盈率(PE-动态)**：股价 / 每股收益，衡量股票估值水平
- **市净率(PB)**：股价 / 每股净资产，反映股价与净资产的关系
- **市销率(PS)**：总市值 / 营业收入，用于评估销售能力
- **换手率**：成交量 / 流通股本，反映股票流动性

### 3. 财务指标
- **净资产收益率(ROE)**：净利润 / 净资产，衡量盈利能力（重点指标）
- **每股收益(EPS)**：净利润 / 总股本，反映每股盈利水平
- **每股净资产(BVPS)**：净资产 / 总股本，反映每股资产价值
- **振幅**：(最高价 - 最低价) / 昨收价，反映波动程度

### 4. 基本信息
- **所属行业**：股票所属的行业分类
- **上市时间**：股票首次公开发行的日期

## UI 设计

### 布局结构
```
┌─────────────────────────────────┐
│ 股票名称    代码      ¥10.50    │
│                    +0.50 (+5%)  │
├─────────────────────────────────┤
│ 市值股本                         │
│ 总市值: 105亿   流通市值: 84亿   │
│ 总股本: 10万    流通股: 8万      │
├─────────────────────────────────┤
│ 估值指标                         │
│ 市盈率: 25.6    市净率: 3.2     │
│ 市销率: 4.5     换手率: 2.5%    │
├─────────────────────────────────┤
│ 财务指标                         │
│ ROE: 15.8%      EPS: 0.42       │
│ BVPS: 3.28      振幅: 5.2%      │
├─────────────────────────────────┤
│ 基本信息                         │
│ 所属行业: 电子信息               │
│ 上市时间: 2020-01-15            │
└─────────────────────────────────┘
```

### 设计风格
- **配色**：遵循项目整体配色方案
  - 涨：`var(--color-up)` #ef4444 / #f87171
  - 跌：`var(--color-down)` #10b981 / #34d399
  - 主文本：`var(--text-primary)`
  - 次要文本：`var(--text-secondary)`
  - 三级文本：`var(--text-tertiary)`

- **圆角**：8px，与项目其他卡片保持一致
- **阴影**：`var(--shadow-md)`
- **边框**：`1px solid var(--border-light)`
- **字体**：Inter 字体家族

### 交互设计
1. **悬停延迟**：鼠标悬停在股票名称上 300ms 后显示卡片
2. **隐藏延迟**：鼠标移出 200ms 后隐藏卡片
3. **保持显示**：鼠标移入卡片内部时保持显示
4. **动画效果**：淡入 + 向上滑动动画（200ms）
5. **视觉提示**：股票名称悬停时颜色变化，cursor: help

## 数据来源

使用 akshare 的 `stock_individual_info_em` 接口获取数据：

```python
import akshare as ak

# 获取股票基本信息
df = ak.stock_individual_info_em(symbol="000002")
```

返回数据包含：
- 股票代码、股票简称
- 总股本、流通股
- 总市值、流通市值
- 行业、上市时间
- 最新价

## 实现要点

### 1. 组件位置
- 位置：`react-app/src/components/StockInfoCard/`
- 文件：
  - `index.tsx` - 组件逻辑
  - `StockInfoCard.css` - 样式

### 2. 集成方式
在 `SuperChart` 组件的股票名称处添加悬停触发：

```tsx
<div 
  className="sc-name sc-name-hoverable"
  onMouseEnter={handleShowInfo}
  onMouseLeave={handleHideInfo}
>
  {stockName}
  {showStockInfo && (
    <div className="sc-stock-info-popup">
      <StockInfoCard code={code} visible={showStockInfo} />
    </div>
  )}
</div>
```

### 3. 响应式设计
- 桌面端：320-380px 宽度
- 移动端：适配小屏幕，调整字体大小和间距

### 4. 性能优化
- 使用 `useEffect` 控制数据加载时机
- 仅在 `visible=true` 时发起请求
- 添加加载状态和错误处理

## 后续优化

1. **数据缓存**：缓存已加载的股票信息，避免重复请求
2. **更多指标**：根据用户反馈添加更多财务指标
3. **图表集成**：添加小型走势图或K线图
4. **对比功能**：支持与行业平均值对比
5. **自定义指标**：允许用户选择显示哪些指标

## 技术栈

- React 18
- TypeScript
- CSS Variables (主题支持)
- akshare API (数据源)

## 参考资料

- 同花顺 F10 资料页面
- 东方财富个股详情页
- 通达信软件 F10 界面
